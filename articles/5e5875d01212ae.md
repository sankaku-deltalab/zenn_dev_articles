---
title: "[Elixir] PropCheck ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ VSCode ã® ElixirLS æ‹¡å¼µãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å•é¡Œã®å¯¾å‡¦"
emoji: "ğŸ”€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Elixir", "VSCode", "PropCheck", "ElixirLS", "test"]
published: true
---

ãƒ†ã‚¹ãƒˆã«PropCheckã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ElixirLSãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã€‚
ã©ã†ã‚„ã‚‰ElixirLSãŒãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã ã¨ãã€ã‚³ãƒ¼ãƒ‰ã« `PropCheck.Properties.property/2` ãŒã‚ã‚‹ã¨ `GenServer.call/3`ã‚’å®Ÿè¡Œã—ã¦ã—ã¾ã£ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã›ã„ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã‚‰ã—ã„ã€‚

ã“ã‚Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€ElixirLSå®Ÿè¡Œæ™‚ã®ã¿ `PropCheck.Properties.property` ã‚’å·®ã—æ›¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

.vscode/settings.json
```json
{
  "elixirLS.envVariables": {
    "RUNNING_IN_ELIXIR_LS": "1"
  }
}
```

test/test1_test.exs
```elixir
defmodule Els.PropCheck do
  @doc """
  Stub for PropCheck.Properties.property/2
  """
  def property(_, _, _ \\ nil, _ \\ nil) do
  end

  defmacro __using__(opts) do
    if System.get_env("RUNNING_IN_ELIXIR_LS") == nil do
      quote do
        use PropCheck, unquote(opts)
      end
    else
      quote do
        # Copied from PropCheck.__using__/1
        # PropCheck.Properties.property/2 crash the Elixir Language Server

        import PropCheck
        import PropCheck.Properties, except: [property: 1, property: 2, property: 3, property: 4]
        # import :proper_types, except: [lazy: 1, to_binary: 1, function: 2]
        import PropCheck.BasicTypes
        import PropCheck.TargetedPBT

        import Els.PropCheck
      end
    end
  end
end

defmodule Els.Test1 do
  use ExUnit.Case
  use Els.PropCheck

  property "int-str round-trip" do
    forall v <- integer() do
      decoded =
        v
        |> to_string()
        |> String.to_integer()

      decoded == v
    end
  end
end
```


## ç’°å¢ƒ

- ElixirLS: v0.20.0
- PropCheck: 1.4.1
