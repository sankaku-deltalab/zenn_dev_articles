---
title: "Phoenix ã‚’ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã¨ã—ã¦ä½¿ã†"
emoji: "ğŸ–¥ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["elixir", "phoenix"]
published: false
---

Phoenix ã‚’ä½¿ã£ã¦ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€‚

[Desktop](https://github.com/elixir-desktop/desktop) ã‚’ä½¿ã£ãŸã‚Š [Tauri ã« Phoenix ã‚’çµ„ã¿è¾¼ã‚“ã ã‚Š](https://github.com/dieharders/example-tauri-python-server-sidecar/tree/master) ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ãŒã€UIãŒãŸã ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã„ã„ãªã‚‰ Phoenix ãã®ã¾ã¾ã§ã‚‚ã§ãã‚‹ã€‚

## æ‰‹é †

1. `rel/vm.args.eex` ã‚’ç·¨é›†ã™ã‚‹ã€‚  
   é€šå¸¸ã¯ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ãŸã‚‰ epmd ã‚‚èµ·å‹•ã™ã‚‹ãŒã€epmd ã¯ã‚¢ãƒ—ãƒªã‚’æ®ºã—ã¦ã‚‚æ­»ãªãªã„ã®ã§ã€CLI ã‹ã‚‰æ­¢ã‚ãªã„ã¨ `epmd.exe` ãŒå‰Šé™¤ã§ããªããªã£ã¦ã—ã¾ã†ã€‚ãã®ãŸã‚ epmd ãŒèµ·å‹•ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
   ```
   ## Disable epmd
   -start_epmd false
   -dist_listen false
   ```
2. `rel/overlays/bin/server(.bat)` ã‚’ç·¨é›†ã™ã‚‹ã€‚  
   ç’°å¢ƒå¤‰æ•°ã‚’ã“ã“ã«è¿½åŠ ã—ã€DBã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨Webãƒšãƒ¼ã‚¸ã‚’é–‹ãã®ã‚’ã“ã“ã§ã‚„ã£ã¦ã—ã¾ã†ã€‚
   ```bat
   set PHX_SERVER=true

   rem Set the environment variables for the server
   set DATABASE_PATH=./database.db
   set SECRET_KEY_BASE=(value generated by `mix phx.gen.secret`)
   set PHX_HOST=127.0.0.1
   set PORT=38306

   rem Migrate the database (if use db)
   call "%~dp0\phx_local" eval MyApp.Release.migrate

   rem Open the browser
   start http://%PHX_HOST%:%PORT%

   call "%~dp0\phx_local" start
   ```
3. `config/runtime.exs` ã‚’ç·¨é›†ã™ã‚‹ã€‚  
   ã‚ˆãã‚ã‹ã£ã¦ã„ãªã„ãŒã€ç„¡ç·¨é›†ã ã¨ h_ttp://127.0.0.1:\<port\> ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€‚
   ```elixir
   # ...

   config :phx_local, MyAppWeb.Endpoint,
     url: [host: host, port: port, scheme: "http"],
     http: [ip: {127, 0, 0, 1}, port: port],
     secret_key_base: secret_key_base

   # ...
   ```
4. é€šå¸¸ã¨åŒã˜ã‚ˆã†ã«ãƒªãƒªãƒ¼ã‚¹ã€‚
   1. `MIX_ENV=prod mix assets.deploy`
   2. `MIX_ENV=prod mix release`
